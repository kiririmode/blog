---
Title: CDP (Cisco Discovery Protocol)
Category:
- study
Date: 2008-08-12T00:00:07+09:00
URL: https://kiririmode.hatenablog.jp/entry/20080812/p8
EditURL: https://blog.hatena.ne.jp/kiririmode/kiririmode.hatenablog.jp/atom/entry/8454420450078214439
---

直接接続 (WAN 接続を含む) されている Cisco 製デバイスに関する情報収集を行うデータリンク層プロトコル．以下の情報を知ることができる．
- デバイス識別子 (ホスト名)
- インタフェース名
- 能力リスト (デバイスがサポートしている機能)
- 各プロトコル毎のレイヤ 3 アドレス
- プラットフォーム
- IOS タイプとバージョン
- ホールドタイム (CDP パケットを保持する時間)

CDP が有効になっているデバイスは 60 秒毎に自分の情報を含んだ CDP パケットを隣接デバイスにマルチキャストしている．

**セキュリティ

CDP をムダに有効にしているとセキュリティ的に良くない (情報を垂れ流しにしている) ので，最近は CDP は無効にされる．デバイス全体で無効にするには
>||
(config)# no cdp run
||<
特定のインタフェースにおいて無効にするには，
>||
(config-if)# no cdp enable
||<
とする．

**使う

CDP で集めた情報を見るコマンドは以下の 3 つ．
>||
# show cdp neighbors
# show cdp neighbors detail
# show cdp entry *
||<
一つ目は隣接デバイスの情報の要約であり，レイヤ 3 アドレスは表示されない．2 つ目のコマンドなら IP アドレスが表示される．3 つ目は 2 つ目と同じ．'*' は特定インタフェースに置き換えることで，そのインタフェースの情報のみ表示することができる．

CDP のタイマ値やホールドタイムを表示するのは以下のコマンド．
>||
# show cdp
||<
さらに，CDP 送受信パケット自身に関する情報は
>||
# show cdp traffic
||<
によってアクセスできる．パケット数やエラー数ね．

CDP が有効になっている各インタフェースに関する情報は
>||
# show cdp interface
||<
で見ることが可能．そのインタフェースの状態 (up/up になっているか等)，カプセル化の状態，それと CDP タイマ値などを見ることができる．
